# MSc.Individual.Project
This is the code for an IOS App I developed with reference from raywenderlich.com tutorials to control the mechanism I designed for the Individual Project of my Masters degree.

The Robot controller is a touch screen smartphone application, developed for IOS devices using swift language in Xcode. The user interface is comprised of two view controller scenes, (i) to connect the peripheral (Robotic Device) to the delegate (IOS device) via Bluetooth, and (ii) to allow the user to control the linear and angular motion of the robotic end effector. The two view controller scenes are connected using a button-activated segue command, and are organized by a navigation controller scene.

The first view controller is responsible for connecting the IOS App to the BLE module so data can be shared. When the device is not connected to Bluetooth access to the robotic controllers is not enabled. Override allows you to visually access the controls in the second view controller, however, data will not be transmitted to the microcontroller in this state. When the App is opened the manager delegate begins scanning for nearby BLE devices that have a specific UUID Service, unique to the BLE module used in this study. This ensures that the IOS app will only connect to the BLE module in this study, and no other Bluetooth enabled devices nearby. Scanning stops once the BLE module is connected, resulting in the user interface updating, and the button to access the second view controller enabled.

The  second view controller scene contains a vertical slider, and a joystick, used tocontrol the linear and angular motion of the robot’s end effector, respectively. As the controller objects are manipulated, their internal variables are detected as integers, then converted to byte data and then sent to the microcontroller independently. The vertical slider was created by rotating a horizontal slider object by 90deg. If the slider is dragged, it’s internal value changes, and as a result, the slider label updates with the direction of translation; either forward or backward. A forward translating robot correlates to a positive internal value, and a backward translating robot correlates to a negative internal value. When no touch is observed, the slider sits at a controller value of zero and the end effectors remains stationary.

The joystick is comprised of a handle, manipulated about the surface of a base. The code used to develop this function is based off the work done in https://github.com/bradhowes/Joystick. As the joystick moves on the user interface, two values are detected, the displacement of the handle relative to the center of the base, and the angle. The detected values are converted from polar coordinates (!, r) to rectangular coordinates (x, y) as the angular motion mechanism is defined by two planes of rotation. The x coordinate controls the stepper motor that drives the end effector in the ZX plane, while the y coordinate drives the ZY plane. When no touch is observed on the joystick, the handle remains in the position it was previously set to and the end effector maintains it’s current position. Data from the IOS app will only be sent to the RX pin of the microcontroller if it is wrapped in a data object that matches the proper characteristic UUID from the BLE module. For this study, the proper characteristic was the BLE shields TX(write) characteristic. To reduce an influx of data sent to the microcontroller, data from the slider object stops being sent when no touch is registered by the slider object, and the joystick object only sends data immediately after a touch has been registered by the user interface.
